generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String    @id @default(uuid())
  firstname         String   
  lastname          String
  username          String    @unique
  email             String    @unique
  password          String
  userPr            UserPR[]
}

model Admin {
  id                String @id @default(uuid())
  firstname         String   
  lastname          String
  username          String    @unique
  email             String    @unique
  password          String
  repos             Repos[]
}

model Repos {
  id                String   @id @default(uuid())
  title             String
  description       String
  githubUrl         String
  forkCount         String
  starCount         String
  commitCount       String
  adminId           String
  admin             Admin    @relation(fields: [adminId], references: [id])
  userPRs           UserPR[]
}

model UserPR {
  id                String                @id @default(uuid())
  githubUsername    String
  userId            String
  user              User                  @relation(fields: [userId], references: [id])
  repoId            String
  repo              Repos                 @relation(fields: [repoId], references: [id])
  userContributions UserContribution[]
}

model UserContribution {
  id                String    @id @default(uuid())
  title             String
  description       String
  ethAddress        String
  prStatus          PrStatus
  commitsCount      String
  filesChangedCount String
  prUrl             String
  userPrId          String
  userPr            UserPR    @relation(fields: [userPrId], references: [id])
}

enum PrStatus {
  OPENED
  CLOSED
  MERGED
}
