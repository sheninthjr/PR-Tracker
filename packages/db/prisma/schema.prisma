generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String    @id @default(uuid())
  githubUsername     String    @unique
  password           String
  userPr            UserPR[]
}

model Admin {
  id                String @id @default(uuid())
  githubUsername    String @unique
  password          String
  repos             Repos[]
}

model Repos {
  id                String   @id @default(uuid())
  githubUrl         String
  title             String
  description       String
  adminId           String
  admin             Admin    @relation(fields: [adminId], references: [id])
  userPRs           UserPR[]
}

model UserPR {
  id                String                @id @default(uuid())
  githubUsername    String
  userId            String
  user              User                  @relation(fields: [userId], references: [id])
  repoId            String
  repo              Repos                 @relation(fields: [repoId], references: [id])
  userContributions UserContribution[]
}

model UserContribution {
  id                String    @id @default(uuid())
  title             String
  description       String
  prType            PrType?
  prUrl             String
  userPrId          String
  userPr            UserPR    @relation(fields: [userPrId], references: [id])
}

enum PrType {
  OPENED
  CLOSED
  MERGED
}
